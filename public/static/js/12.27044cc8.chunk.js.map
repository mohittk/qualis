{"version":3,"sources":["hooks/useDebounce.jsx","hooks/useTimeout.jsx","pages/pastew/pastew.jsx"],"names":["useDebounce","callback","delay","dependencies","callbackRef","useRef","timeoutRef","useEffect","current","set","useCallback","setTimeout","clear","clearTimeout","reset","useTimeout","SyntaxHighlighter","lazy","Textarea","setMarkdownOut","useState","markdown","setMarkdown","onChange","e","target","value","Pastew","id","useParams","markdownOut","output","setOutput","document","getElementById","classList","add","axios","get","then","res","data","message","catch","err","JSON","stringify","console","log","className","children","remarkPlugins","remarkGfm","components","code","node","inline","props","match","exec","fallback","String","replace","style","darcula","showLineNumbers","language","PreTag","onClick","token","sessionStorage","getItem","post","navigator","clipboard","writeText","window","clipboardData","setData"],"mappings":"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","file":"static/js/12.27044cc8.chunk.js","sourcesContent":["import { useEffect } from \"react\";\nimport useTimeout from \"./useTimeout\";\n\nexport default function useDebounce(callback, delay, dependencies) {\n  const { reset, clear } = useTimeout(callback, delay);\n  useEffect(reset, [...dependencies, reset]);\n  useEffect(clear, [clear]);\n}\n","import { useCallback, useEffect, useRef } from \"react\";\n\nexport default function useTimeout(callback, delay) {\n  const callbackRef = useRef(callback);\n  const timeoutRef = useRef();\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n\n  const set = useCallback(() => {\n    timeoutRef.current = setTimeout(() => callbackRef.current(), delay);\n  }, [delay]);\n\n  const clear = useCallback(() => {\n    timeoutRef.current && clearTimeout(timeoutRef.current);\n  }, []);\n\n  useEffect(() => {\n    set();\n    return clear;\n  }, [delay, set, clear]);\n\n  const reset = useCallback(() => {\n    clear();\n    set();\n  }, [clear, set]);\n\n  return { reset, clear };\n}\n","import React, { useState, useEffect, lazy, Suspense } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport useDebounce from \"../../hooks/useDebounce\";\nimport { darcula } from \"react-syntax-highlighter/dist/esm/styles/prism\";\nimport axios from \"axios\";\nimport { MdOutlineContentCopy } from \"react-icons/md\";\nimport \"./pastew.scss\";\nimport Loader from \"../../components/loader/loader\";\nconst SyntaxHighlighter = lazy(() =>\n  import(\"react-syntax-highlighter/dist/esm/prism\")\n);\n\n// import remarkMath from \"remark-math\";\n// import rehypeKatex from \"rehype-katex\";\n// import \"katex/dist/katex.min.css\";\n\nfunction Textarea({ setMarkdownOut }) {\n  const [markdown, setMarkdown] = useState(\"\");\n  useDebounce(() => setMarkdownOut(markdown), 1000, [markdown]);\n\n  return (\n    <div>\n      <textarea onChange={(e) => setMarkdown(e.target.value)} />\n    </div>\n  );\n}\n\nfunction Pastew() {\n  let { id } = useParams();\n\n  const [markdownOut, setMarkdownOut] = useState(\"\");\n  const [output, setOutput] = useState(\"\");\n\n  useEffect(() => {\n    if (id) {\n      document.getElementById(\"pastew-page\").classList.add(\"remove\");\n\n      axios\n        .get(`/api/pastew/${id}`)\n        .then((res) => {\n          setMarkdownOut(res.data.message);\n        })\n        .catch((err) => setOutput(JSON.stringify(err.message)));\n    }\n  }, [id]);\n\n  useEffect(() => {\n    return () => {\n      console.log(output);\n    };\n  }, [output]);\n\n  return (\n    <div className=\"pastew-page\" id=\"pastew-page\">\n      <div className=\"left-box\">\n        <Textarea setMarkdownOut={setMarkdownOut} />\n      </div>\n      <div className=\"right-box\">\n        <ReactMarkdown\n          children={markdownOut}\n          remarkPlugins={[remarkGfm]}\n          components={{\n            code({ node, inline, className, children, ...props }) {\n              const match = /language-(\\w+)/.exec(className || \"\");\n              return !inline && match ? (\n                <Suspense fallback={<Loader inline={true} />}>\n                  <SyntaxHighlighter\n                    children={String(children).replace(/\\n$/, \"\")}\n                    style={darcula}\n                    showLineNumbers={true}\n                    language={match[1]}\n                    PreTag=\"div\"\n                    {...props}\n                  />\n                </Suspense>\n              ) : (\n                <code className={className} {...props}>\n                  {children}\n                </code>\n              );\n            },\n          }}\n        />\n      </div>\n\n      <div className=\"floating-buttons\">\n        <div\n          onClick={() => {\n            if (markdownOut !== \"\") {\n              const data = {\n                token: sessionStorage.getItem(\"token\"),\n                markdown: markdownOut,\n              };\n\n              axios\n                .post(\"/api/pastew\", data)\n                .then((res) => {\n                  setOutput(res.data.message);\n\n                  if (navigator.clipboard) {\n                    navigator.clipboard\n                      .writeText(\n                        `https://intail.qualis.ml/#/pastew/${res.data.message}`\n                      )\n                      .catch(console.log);\n                  } else if (window.clipboardData) {\n                    window.clipboardData.setData(\n                      \"Text\",\n                      `https://intail.qualis.ml/#/pastew/${res.data.message}`\n                    );\n                  }\n                })\n                .catch((err) => setOutput(JSON.stringify(err.message)));\n            } else {\n              setOutput(\"invalid input\");\n            }\n          }}\n        >\n          <MdOutlineContentCopy />\n          copy link\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Pastew;\n"],"sourceRoot":""}