{"version":3,"sources":["pages/boards/boards.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["Boards","user","id","_id","token","link","useLocation","state","useEffect","document","getElementById","classList","add","useState","todo","setTodo","editing","setEditing","input","setInput","updateInput","setUpdateInput","fromPosition","toPosition","key","handleChange","e","target","value","handleUpdateChange","index","innerText","type","newState","updates","remove","update","setAttribute","axios","patch","catch","err","console","log","JSON","stringify","message","get","params","then","res","data","className","Object","keys","map","onClick","handelBoardDelete","elem","onDragStart","drag","onDrop","preventDefault","splice","from","to","drop","onDragOver","allowDrop","onMouseDown","parentElement","suppressContentEditableWarning","spellCheck","onFocus","onInput","onBlur","onKeyPress","handelDelete","undefined","placeholder","onChange","autoComplete","alert","push","handleAdd","name","autocomplete","handleBoardAdd","_defineProperty","obj","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"kNA+UeA,UAxUA,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACZC,EAAKD,EAAKE,IACRC,EAAQH,EAAKG,MAEfC,EAAOC,cAEPD,EAAKE,QACPL,EAAKG,EAAKE,MAAMN,MAGlBO,qBAAU,WACJH,EAAKE,OACPE,SAASC,eAAe,aAAaC,UAAUC,IAAI,YAEpD,CAACP,EAAKE,QAET,MAAwBM,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA0BJ,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KACA,EAAsCN,mBAAS,IAA/C,mBAAOO,EAAP,KAAoBC,EAApB,KAEIC,EAAe,GACfC,EAAa,GAEXX,EAAM,SAACY,GACXP,EAAW,eACRO,GAAM,KAILC,EAAe,SAACC,GACpBP,EAASO,EAAEC,OAAOC,QAGdC,EAAqB,SAACH,EAAGF,EAAKM,GAGlC,GAFAT,EAAeK,EAAEC,OAAOI,WAEpBL,EAAEF,KAAkB,SAAXE,EAAEM,KAAiB,CAC9B,IAAMC,EAAWnB,EACjBmB,EAAST,GAAKM,GAASV,EACvB,IAAMc,EAAU,CACdhC,GAAIA,EACJsB,IAAKA,EACLW,OAAQL,EACRM,OAAQhB,EACRhB,MAAOA,GAETW,EAAQ,eAAKkB,IACbZ,EAAe,IAEfK,EAAEC,OAAOU,aAAa,kBAAmB,SAEzCC,IACGC,MAAM,YAAaL,GACnBM,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIC,KAAKC,UAAUJ,EAAIK,eAyFrDtC,qBAAU,WACR8B,IACGS,IAAI,YAAa,CAAEC,OAAQ,CAAE9C,GAAIA,KACjC+C,MAAK,SAACC,GACDA,EAAIC,KACNpC,EAAQmC,EAAIC,MAEZT,QAAQC,IAAI,YAGfH,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QAC7B,CAACvC,IAyDJ,OACE,qCACE,qBAAKkD,UAAU,cAAf,SACE,sBAAKA,UAAU,SAASlD,GAAG,YAA3B,UACGmD,OAAOC,KAAKxC,GAAMyC,KAAI,SAAC/B,GACtB,OACE,sBAAK4B,UAAU,QAAf,UACE,+BACG5B,EACD,sBAAMgC,QAAS,kBA9FL,SAAChC,GACzB,IAAMS,EAAWnB,EACXoB,EAAU,CACdhC,GAAIA,EACJiC,OAAQX,EACRpB,MAAOA,GAGTkC,IACGC,MAAM,YAAaL,GACnBM,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIC,KAAKC,UAAUJ,EAAIK,oBAE1Cb,EAAST,GAEhBT,EAAQ,eAAKkB,IAgFsBwB,CAAkBjC,IAAvC,SACE,cAAC,IAAD,SAGJ,sBAAK4B,UAAU,UAAf,UACGtC,EAAKU,GAAK+B,KAAI,SAACG,EAAM5B,GACpB,OACE,mCACE,sBAEE6B,YAAa,SAACjC,GAAD,OA1ExB,SAACF,EAAKM,GACjBR,EAAe,CAACE,EAAKM,GAyEqB8B,CAAKpC,EAAKM,IAC9B+B,OAAQ,SAACnC,GAAD,OAvEnB,SAACA,GACZA,EAAEoC,iBAEF,IAAM7B,EAAWnB,EAEjB,GAAIS,EAAW,KAAOD,EAAa,GACjCW,EAASV,EAAW,IAAIwC,OACtBxC,EAAW,GACX,EACAU,EAASX,EAAa,IAAIA,EAAa,KAEzCW,EAASX,EAAa,IAAIyC,OAAOzC,EAAa,GAAI,OAC7C,CACL,GAAIA,EAAa,KAAOC,EAAW,GACjC,OAAO,EACED,EAAa,GAAKC,EAAW,IACtCU,EAASV,EAAW,IAAIwC,OACtBxC,EAAW,GACX,EACAU,EAASX,EAAa,IAAIA,EAAa,KAEzCW,EAASX,EAAa,IAAIyC,OAAOzC,EAAa,GAAI,IACzCA,EAAa,GAAKC,EAAW,KACtCU,EAASV,EAAW,IAAIwC,OACtBxC,EAAW,GACX,EACAU,EAASX,EAAa,IAAIA,EAAa,KAEzCW,EAASX,EAAa,IAAIyC,OAAOzC,EAAa,GAAK,EAAG,IAI1D,IAAMY,EAAU,CACdhC,GAAIA,EACJ8D,KAAM,CAAC1C,EAAa,GAAIW,EAASX,EAAa,KAC9C2C,GAAI,CAAC1C,EAAW,GAAIU,EAASV,EAAW,KACxCnB,MAAOA,GAGTkC,IACGC,MAAM,YAAaL,GACnBM,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIC,KAAKC,UAAUJ,EAAIK,aAEjD/B,EAAQ,eAAKkB,IA4BwBiC,CAAKxC,IACpByC,WAAY,SAACzC,GAAD,OA1BlB,SAACA,EAAGF,EAAKM,GACzBP,EAAa,CAACC,EAAKM,GACnBJ,EAAEoC,iBAwBuCM,CAAU1C,EAAGF,EAAKM,IAJvC,UAME,sBACEuC,YAAa,SAAC3C,GAAD,OACXA,EAAEC,OAAO2C,cAAcjC,aACrB,YACA,SAJN,gBAUA,qBACEkC,gCAA8B,EAC9BC,WAAW,QACXhB,QAAS,SAAC9B,GACHrB,EAAKE,OACRmB,EAAEC,OAAOU,aACP,kBACA,SAGNoC,QAAS,SAAC/C,GAAD,OAAOG,EAAmBH,EAAGF,EAAKM,IAC3C4C,QAAS,SAAChD,GAAD,OAAOG,EAAmBH,EAAGF,EAAKM,IAC3C6C,OAAQ,SAACjD,GAAD,OAAOG,EAAmBH,EAAGF,EAAKM,IAC1C8C,WAAY,SAAClD,GACG,UAAVA,EAAEF,KACJK,EAAmBH,EAAGF,EAAKM,IAfjC,SAkBG4B,IAEH,sBAAMF,QAAS,kBArLlB,SAAChC,EAAKM,GACzB,IAAMG,EAAWnB,EACXoB,EAAU,CACdhC,GAAIA,EACJsB,IAAKA,EACLW,OAAQrB,EAAKU,GAAKM,GAClB1B,MAAOA,GAET6B,EAAST,GAAKuC,OAAOjC,EAAO,GAC5Bf,EAAQ,eAAKkB,IAEbK,IACGC,MAAM,YAAaL,GACnBM,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIC,KAAKC,UAAUJ,EAAIK,aAwKN+B,CAAarD,EAAKM,IAAvC,iBAnCKA,QA2Cb,uBACA,4BAEkBgD,IAAjB9D,EAAQQ,GACP,8BACE,uBACEQ,KAAK,OACL+C,YAAY,QACZnD,MAAOV,EACP8D,SAAUvD,EACVwD,aAAa,MACbL,WAAY,SAAClD,GACG,UAAVA,EAAEF,KAlOZ,SAACA,GACjB,GAAc,KAAVN,EACFgE,MAAM,sBACD,CACL,IAAMjD,EAAWnB,EACjBmB,EAAST,GAAK2D,KAAKjE,GACnBD,EAAW,IAEXF,EAAQ,eAAKkB,IAEb,IAAMC,EAAU,CACdhC,GAAIA,EACJsB,IAAKA,EACLZ,IAAKM,EACLd,MAAOA,GAGTkC,IACGC,MAAM,YAAaL,GACnBM,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIC,KAAKC,UAAUJ,EAAIK,aAEjD3B,EAAS,KA6MkCiE,CAAU5D,QAKvC,qBAAK4B,UAAU,SAASI,QAAS,kBAAM5C,EAAIY,IAA3C,SACE,cAAC,IAAD,WAzEoBA,MAiFhC,mCAC8BsD,IAA3B9D,EAAO,YACN,8BACE,uBACEgB,KAAK,OACLqD,KAAK,OACLN,YAAY,QACZnD,MAAOV,EACP8D,SAAUvD,EACV6D,aAAa,MACbV,WAAY,SAAClD,GACG,UAAVA,EAAEF,KAlND,WACrB,GAAc,KAAVN,EAAcgE,MAAM,sBACnB,CACH,IAAMhD,EAAU,CACdhC,GAAIA,EACJU,IAAKM,EACLd,MAAOA,GAETkC,IACGC,MAAM,YAAaL,GACnBe,MAAK,SAACC,GAIH,IAAIjB,EAHmB,UAArBiB,EAAIC,KAAKL,QACXoC,MAAM,UAGNjD,EAAQ,2BAAQnB,GAAR,kBAAeI,EAAQ,KAC/BD,EAAW,IAEXF,EAAQ,eAAKkB,IAEbd,EAAS,QAGZqB,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIC,KAAKC,UAAUJ,EAAIK,cA2LZyC,QAK7B,sBAAKnC,UAAU,cAAcI,QAAS,kBAAM5C,EAAI,gBAAhD,UACE,cAAC,IAAD,IADF,2BAQR,uBACA,uBACA,4B,gCC3US,SAAS4E,EAAgBC,EAAKjE,EAAKI,GAYhD,OAXIJ,KAAOiE,EACTpC,OAAOqC,eAAeD,EAAKjE,EAAK,CAC9BI,MAAOA,EACP+D,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZJ,EAAIjE,GAAOI,EAGN6D,EAZT,mC,gCCAA,8CAEA,SAASK,EAAQC,EAAQC,GACvB,IAAI1C,EAAOD,OAAOC,KAAKyC,GAEvB,GAAI1C,OAAO4C,sBAAuB,CAChC,IAAIC,EAAU7C,OAAO4C,sBAAsBF,GACvCC,IAAgBE,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAO/C,OAAOgD,yBAAyBN,EAAQK,GAAKT,eAEtDrC,EAAK6B,KAAKmB,MAAMhD,EAAM4C,GAGxB,OAAO5C,EAGM,SAASiD,EAAe5E,GACrC,IAAK,IAAI6E,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAE/CA,EAAI,EACNV,EAAQzC,OAAOsD,IAAS,GAAMC,SAAQ,SAAUpF,GAC9C,YAAeG,EAAQH,EAAKmF,EAAOnF,OAE5B6B,OAAOwD,0BAChBxD,OAAOyD,iBAAiBnF,EAAQ0B,OAAOwD,0BAA0BF,IAEjEb,EAAQzC,OAAOsD,IAASC,SAAQ,SAAUpF,GACxC6B,OAAOqC,eAAe/D,EAAQH,EAAK6B,OAAOgD,yBAAyBM,EAAQnF,OAKjF,OAAOG","file":"static/js/8.67fa370e.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useLocation } from \"react-router-dom\";\nimport \"./boards.scss\";\n\nimport { MdOutlineAddCircle, MdRemoveCircle, MdNoteAdd } from \"react-icons/md\";\n\nconst Boards = ({ user }) => {\n  let id = user._id;\n  const token = user.token;\n\n  let link = useLocation();\n\n  if (link.state) {\n    id = link.state.user;\n  }\n\n  useEffect(() => {\n    if (link.state) {\n      document.getElementById(\"diff-user\").classList.add(\"remove\");\n    }\n  }, [link.state]);\n\n  const [todo, setTodo] = useState({});\n  const [editing, setEditing] = useState({});\n  const [input, setInput] = useState(\"\");\n  const [updateInput, setUpdateInput] = useState(\"\");\n\n  let fromPosition = [];\n  let toPosition = [];\n\n  const add = (key) => {\n    setEditing({\n      [key]: true,\n    });\n  };\n\n  const handleChange = (e) => {\n    setInput(e.target.value);\n  };\n\n  const handleUpdateChange = (e, key, index) => {\n    setUpdateInput(e.target.innerText);\n\n    if (e.key || e.type === \"blur\") {\n      const newState = todo;\n      newState[key][index] = updateInput;\n      const updates = {\n        id: id,\n        key: key,\n        remove: index,\n        update: updateInput,\n        token: token,\n      };\n      setTodo({ ...newState });\n      setUpdateInput(\"\");\n\n      e.target.setAttribute(\"contentEditable\", \"false\");\n\n      axios\n        .patch(\"/api/todo\", updates)\n        .catch((err) => console.log(JSON.stringify(err.message)));\n    }\n  };\n\n  const handleAdd = (key) => {\n    if (input === \"\") {\n      alert(\"type something\");\n    } else {\n      const newState = todo;\n      newState[key].push(input);\n      setEditing({});\n\n      setTodo({ ...newState });\n\n      const updates = {\n        id: id,\n        key: key,\n        add: input,\n        token: token,\n      };\n\n      axios\n        .patch(\"/api/todo\", updates)\n        .catch((err) => console.log(JSON.stringify(err.message)));\n\n      setInput(\"\");\n    }\n  };\n\n  const handelDelete = (key, index) => {\n    const newState = todo;\n    const updates = {\n      id: id,\n      key: key,\n      remove: todo[key][index],\n      token: token,\n    };\n    newState[key].splice(index, 1);\n    setTodo({ ...newState });\n\n    axios\n      .patch(\"/api/todo\", updates)\n      .catch((err) => console.log(JSON.stringify(err.message)));\n  };\n\n  const handleBoardAdd = () => {\n    if (input === \"\") alert(\"type something\");\n    else {\n      const updates = {\n        id: id,\n        add: input,\n        token: token,\n      };\n      axios\n        .patch(\"/api/todo\", updates)\n        .then((res) => {\n          if (res.data.message === \"taken\") {\n            alert(\"taken\");\n          } else {\n            let newState = todo;\n            newState = { ...todo, [input]: [] };\n            setEditing({});\n\n            setTodo({ ...newState });\n\n            setInput(\"\");\n          }\n        })\n        .catch((err) => console.log(JSON.stringify(err.message)));\n    }\n  };\n\n  const handelBoardDelete = (key) => {\n    const newState = todo;\n    const updates = {\n      id: id,\n      remove: key,\n      token: token,\n    };\n\n    axios\n      .patch(\"/api/todo\", updates)\n      .catch((err) => console.log(JSON.stringify(err.message)));\n\n    delete newState[key];\n\n    setTodo({ ...newState });\n  };\n\n  useEffect(() => {\n    axios\n      .get(\"/api/todo\", { params: { id: id } })\n      .then((res) => {\n        if (res.data) {\n          setTodo(res.data);\n        } else {\n          console.log(\"error\");\n        }\n      })\n      .catch((err) => console.log(err));\n  }, [id]);\n\n  const drag = (key, index) => {\n    fromPosition = [key, index];\n  };\n\n  const drop = (e) => {\n    e.preventDefault();\n\n    const newState = todo;\n\n    if (toPosition[0] !== fromPosition[0]) {\n      newState[toPosition[0]].splice(\n        toPosition[1],\n        0,\n        newState[fromPosition[0]][fromPosition[1]]\n      );\n      newState[fromPosition[0]].splice(fromPosition[1], 1);\n    } else {\n      if (fromPosition[1] === toPosition[1]) {\n        return false;\n      } else if (fromPosition[1] < toPosition[1]) {\n        newState[toPosition[0]].splice(\n          toPosition[1],\n          0,\n          newState[fromPosition[0]][fromPosition[1]]\n        );\n        newState[fromPosition[0]].splice(fromPosition[1], 1);\n      } else if (fromPosition[1] > toPosition[1]) {\n        newState[toPosition[0]].splice(\n          toPosition[1],\n          0,\n          newState[fromPosition[0]][fromPosition[1]]\n        );\n        newState[fromPosition[0]].splice(fromPosition[1] + 1, 1);\n      }\n    }\n\n    const updates = {\n      id: id,\n      from: [fromPosition[0], newState[fromPosition[0]]],\n      to: [toPosition[0], newState[toPosition[0]]],\n      token: token,\n    };\n\n    axios\n      .patch(\"/api/todo\", updates)\n      .catch((err) => console.log(JSON.stringify(err.message)));\n\n    setTodo({ ...newState });\n  };\n\n  const allowDrop = (e, key, index) => {\n    toPosition = [key, index];\n    e.preventDefault();\n  };\n\n  return (\n    <>\n      <div className=\"boards-page\">\n        <div className=\"boards\" id=\"diff-user\">\n          {Object.keys(todo).map((key) => {\n            return (\n              <div className=\"board\" key={key}>\n                <h3>\n                  {key}\n                  <span onClick={() => handelBoardDelete(key)}>\n                    <MdRemoveCircle />\n                  </span>\n                </h3>\n                <div className=\"content\">\n                  {todo[key].map((elem, index) => {\n                    return (\n                      <>\n                        <div\n                          key={index}\n                          onDragStart={(e) => drag(key, index)}\n                          onDrop={(e) => drop(e)}\n                          onDragOver={(e) => allowDrop(e, key, index)}\n                        >\n                          <span\n                            onMouseDown={(e) =>\n                              e.target.parentElement.setAttribute(\n                                \"draggable\",\n                                \"true\"\n                              )\n                            }\n                          >\n                            ::\n                          </span>\n                          <div\n                            suppressContentEditableWarning\n                            spellCheck=\"false\"\n                            onClick={(e) => {\n                              if (!link.state)\n                                e.target.setAttribute(\n                                  \"contentEditable\",\n                                  \"true\"\n                                );\n                            }}\n                            onFocus={(e) => handleUpdateChange(e, key, index)}\n                            onInput={(e) => handleUpdateChange(e, key, index)}\n                            onBlur={(e) => handleUpdateChange(e, key, index)}\n                            onKeyPress={(e) => {\n                              if (e.key === \"Enter\")\n                                handleUpdateChange(e, key, index);\n                            }}\n                          >\n                            {elem}\n                          </div>\n                          <span onClick={() => handelDelete(key, index)}>\n                            X\n                          </span>\n                        </div>\n                      </>\n                    );\n                  })}\n\n                  <br />\n                  <br />\n\n                  {editing[key] !== undefined ? (\n                    <div>\n                      <input\n                        type=\"text\"\n                        placeholder=\"enter\"\n                        value={input}\n                        onChange={handleChange}\n                        autoComplete=\"off\"\n                        onKeyPress={(e) => {\n                          if (e.key === \"Enter\") handleAdd(key);\n                        }}\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"addBtn\" onClick={() => add(key)}>\n                      <MdOutlineAddCircle />\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n\n          <div>\n            {editing[\"addnewBoard\"] !== undefined ? (\n              <div>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  placeholder=\"enter\"\n                  value={input}\n                  onChange={handleChange}\n                  autocomplete=\"off\"\n                  onKeyPress={(e) => {\n                    if (e.key === \"Enter\") handleBoardAdd();\n                  }}\n                />\n              </div>\n            ) : (\n              <div className=\"addBoardBtn\" onClick={() => add(\"addnewBoard\")}>\n                <MdNoteAdd /> add new board\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <br />\n      <br />\n      <br />\n    </>\n  );\n};\nexport default Boards;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}